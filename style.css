
:root{
  --bg1:#0f1225;
  --bg2:#111f3b;
  --accent:#7cf4ff;
  --accent-2:#ffd166;
  --good:#95ffb1;
  --bad:#ff5d73;
  --glass: rgba(255,255,255,0.08);
  --glass-stroke: rgba(255,255,255,0.15);
  --shadow: 0 10px 30px rgba(0,0,0,0.3);
  --radius: 18px;
  --arena-pad: clamp(10px, 2vw, 18px);
}
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0; font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color:#e8f0ff; overflow:hidden;
}
#bg{
  position:fixed; inset:0;
  background: radial-gradient(1200px 800px at 10% 20%, #1a2a6c 0%, transparent 60%),
              radial-gradient(1000px 900px at 90% 80%, #b21f1f 0%, transparent 60%),
              linear-gradient(160deg, var(--bg1), var(--bg2));
  filter:saturate(1.1);
  z-index:-2;
}
.hud, .controls{ position:fixed; left:0; right:0; display:flex; gap:10px; align-items:center; }
.hud{ top:0; padding: 10px var(--arena-pad); justify-content:space-between; }
.controls{ bottom:0; padding: 10px var(--arena-pad); justify-content:space-between; }

.glass{
  background: var(--glass);
  backdrop-filter: blur(10px) saturate(1.2);
  border: 1px solid var(--glass-stroke);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

.stat{ display:flex; align-items:center; gap:8px; padding:6px 10px; border-radius:12px; background:rgba(255,255,255,0.05); }
.stat .label{ opacity:0.7; margin-right:6px; font-weight:600; letter-spacing:.4px; }
.stat span:last-child{ font-variant-numeric: tabular-nums; font-weight:700; }

.timer{ gap:8px; }
.progress{ transform: rotate(-90deg); }
.progress .bg{
  fill:none; stroke:rgba(255,255,255,.15); stroke-width:3.5; stroke-linecap:round;
}
.progress .fg{
  fill:none; stroke: var(--accent-2); stroke-width:3.5; stroke-linecap:round;
  stroke-dasharray: 100 100; stroke-dashoffset: 0;
  transition: stroke-dashoffset .2s ease;
}
#time{ min-width: 28px; text-align:right; font-weight:700; }

.btn{
  border:1px solid var(--glass-stroke);
  background:rgba(255,255,255,0.06);
  color:#fff; padding:10px 14px; border-radius:12px;
  font-weight:700; letter-spacing:.3px; cursor:pointer;
  box-shadow: var(--shadow);
}
.btn:hover{ background:rgba(255,255,255,0.12); }
.btn.primary{ background: linear-gradient(180deg, #2dd4bf, #06b6d4); border:none; }
.btn.ghost{ background:transparent; }

.cfg{ display:flex; gap:16px; align-items:center; opacity:.9; }
.cfg label{ font-size:14px; display:flex; align-items:center; gap:8px; }
select{ padding:6px 10px; border-radius:10px; background:#0b1228; color:#fff; border:1px solid #20325a; }

.arena{
  position:fixed; inset:70px var(--arena-pad) 70px var(--arena-pad);
  border-radius: clamp(12px, 2vw, 20px);
  overflow:hidden;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.08);
}

.bubble{
  position:absolute; width: var(--size); height: var(--size);
  border-radius:50%;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.85), rgba(255,255,255,.25) 35%, rgba(255,255,255,0) 40%),
              radial-gradient(circle at 50% 60%, rgba(255,255,255,.12), rgba(255,255,255,0) 60%),
              radial-gradient(circle at 50% 50%, rgba(124,244,255,.15), rgba(124,244,255,.05) 60%, rgba(255,255,255,0) 70%);
  box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 0 20px rgba(255,255,255,.25);
  cursor:pointer;
  animation: floatUp var(--floatDur) ease-in-out infinite alternate;
  transform: translateZ(0);
}
.bubble::after{
  content:""; position:absolute; inset:-2px; border-radius:50%;
  border:2px solid rgba(255,255,255,.2);
  filter: blur(.4px);
  pointer-events:none;
}
.bubble.pop{
  animation: pop .22s ease forwards;
}
.bubble.spark{
  box-shadow: 0 0 20px var(--accent), 0 0 60px rgba(124,244,255,.6);
  filter: saturate(1.3);
}
@keyframes floatUp{
  0%{ transform: translateY(0) translateX(0) }
  100%{ transform: translateY(-16px) translateX(10px) }
}
@keyframes pop{
  from{ transform: scale(1); opacity:1 }
  to{ transform: scale(.2) rotate(20deg); opacity:0 }
}

/* Particle pop */
.particle{
  position:absolute; width:6px; height:6px; border-radius:50%;
  background: var(--accent-2);
  box-shadow: 0 0 8px rgba(255,209,102,.9);
  animation: fly .6s ease-out forwards;
}
@keyframes fly{
  to{ transform: translate(var(--dx), var(--dy)) scale(0.2); opacity:0; }
}

.overlay{
  position:fixed; inset:0; display:grid; place-items:center;
  background: linear-gradient(to bottom, rgba(0,0,0,.3), rgba(0,0,0,.55));
}
.hidden{ display:none; }
.modal{ padding:24px; width:min(520px, 90vw); text-align:center; }
.modal h2{ margin:0 0 6px; }
.modal p{ opacity:.9; margin: 0 0 18px; }

/* Small screens */
@media (max-width: 640px){
  .cfg{ display:none; }
}
